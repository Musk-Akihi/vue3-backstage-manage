<!-- å¯¼èˆªå®ˆå« -->
<template>
  <div>
    <h2>navigationGuard</h2>
    <h4>
      vue-routeræä¾›çš„å¯¼èˆªå®ˆå«ä¸»è¦ç”¨æ¥é€šè¿‡è·³è½¬æˆ–å–æ¶ˆçš„æ–¹å¼å®ˆå«å¯¼èˆªã€‚
      è¿™é‡Œæœ‰å¾ˆå¤šæ–¹å¼æ¤å…¥è·¯ç”±å¯¼èˆªä¸­çš„ï¼šå…¨å±€çš„ï¼Œå•ä¸ªè·¯ç”±ç‹¬äº«çš„ï¼Œæˆ–è€…ç»„ä»¶çº§çš„ã€‚
    </h4>

    <hr />

    <h2>å®Œæ•´çš„å¯¼èˆªè§£ææµç¨‹</h2>
    <ul>
      <li>1ã€å¯¼èˆªè¢«è§¦å‘</li>
      <li>2ã€åœ¨å¤±æ´»çš„ç»„ä»¶é‡Œè°ƒç”¨ beforeRouteLeave å®ˆå«</li>
      <li>3ã€è°ƒç”¨å…¨å±€çš„ beforeEach å®ˆå«</li>
      <li>4ã€åœ¨é‡ç”¨çš„ç»„ä»¶é‡Œè°ƒç”¨ beforeRouteUpdate å®ˆå«</li>
      <li>5ã€åœ¨è·¯ç”±é…ç½®é‡Œè°ƒç”¨ beforeEnter å®ˆå«</li>
      <li>6ã€è§£æå¼‚æ­¥è·¯ç”±ç»„ä»¶</li>
      <li>7ã€åœ¨è¢«æ¿€æ´»çš„ç»„ä»¶é‡Œè°ƒç”¨ beforeRouteEnter å®ˆå«</li>
      <li>8ã€è°ƒç”¨å…¨å±€çš„ beforeResolve å®ˆå«</li>
      <li>9ã€å¯¼èˆªè¢«ç¡®è®¤</li>
      <li>10ã€è°ƒç”¨å…¨å±€çš„ afterEach é’©å­</li>
      <li>11ã€è§¦å‘DOMæ›´æ–°</li>
      <li>
        12ã€è°ƒç”¨ beforeRouteEnter å®ˆå«ä¸­ä¼ ç»™ next
        çš„å›è°ƒå‡½æ•°ï¼Œåˆ›å»ºå¥½çš„ç»„ä»¶å®ä¾‹ä¼šä½œä¸ºå›è°ƒå‡½æ•°çš„å‚æ•°ä¼ å…¥
      </li>
    </ul>
  </div>
</template>

<script>
import { defineComponent } from 'vue'
import { onBeforeRouteLeave } from 'vue-router'

export default defineComponent({
  name: 'NavigationGuard',

  components: {},

  /**
   * è¿›å…¥ç»„ä»¶ä¹‹å‰çš„é’©å­ ä¸èƒ½è®¿é—®this
   * å¯ä»¥é€šè¿‡ä¼ ä¸€ä¸ªå›è°ƒç»™ next æ¥è®¿é—®ç»„ä»¶å®ä¾‹ã€‚åœ¨å¯¼èˆªè¢«ç¡®è®¤çš„æ—¶å€™æ‰§è¡Œå›è°ƒã€‚
   */
  // beforeRouteEnter(to, from, next) {
  //   console.log(to)
  //   console.log(from)
  //   console.log('ğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜Š')
  //   next((vm) => {
  //     console.log(vm)
  //     console.log('ğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜Š')
  //   })
  // },

  // beforeRouteUpdate(to, from) {
  //   console.log(to)
  //   console.log(from)
  //   console.log(this)
  //   console.log('ğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜Š')
  // },

  // ç¦»å¼€å®ˆå«
  // beforeRouteLeave(to, from) {
  //   console.log(to)
  //   console.log(from)
  //   console.log('ğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜Š')
  //   const answer = window.confirm('Do you really want to leave? you have unsaved changes!')
  //   if (!answer) return false
  // },

  setup() {
    // onBeforeRouteLeave((to, from) => {
    //   const answer = window.confirm('Do you really want to leave? you have unsaved changes!')
    //   // å–æ¶ˆå¯¼èˆªå¹¶åœç•™åœ¨åŒä¸€é¡µé¢ä¸Š
    //   if (!answer) return false
    // })

    return {}
  }

  // mounted() {
  //   console.log(this)
  //   console.log('ğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜Š')
  // }
})
</script>

<style lang="scss" scoped></style>
