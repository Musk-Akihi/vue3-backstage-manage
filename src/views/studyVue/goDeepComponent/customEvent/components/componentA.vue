<template>
  <button @click="changeCount">æ›´æ”¹count</button>
  <br />
  <button @click="changeName($event)">æ›´æ”¹name</button>
  <br />
  <!-- å¤šä¸ªv-modelç»‘å®š æ¯ä¸ªv-modelå°†åŒæ­¥åˆ°ä¸åŒçš„propä¸Š -->
  <input type="text" :value="title" @input="$emit('update:title', $event.target.value)" />
  <br />
  <input type="text" :value="author" @input="$emit('update:author', $event.target.value)" />
</template>

<script>
import { defineComponent } from 'vue'

export default defineComponent({
  props: {
    title: {
      type: String,
      default: ''
    },
    author: {
      type: String,
      default: ''
    }
  },
  // å®šä¹‰è‡ªå®šä¹‰äº‹ä»¶
  // emits: ['changeCount'],
  // éªŒè¯æŠ›å‡ºçš„äº‹ä»¶
  emits: {
    changeCount: null,
    changeName: (res) => {
      if (res) {
        return true
      } else {
        console.error('error')
        return false
        // [Vue warn]: Invalid event arguments: event validation failed for event "changeName".
      }
    },
    'update:title': null,
    'update:author': null
  },

  setup(props, context) {
    const changeCount = (event) => {
      console.log(event)
      console.log(event.target.tagName)
      console.log('ğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜Š')

      context.emit('changeCount')
    }
    const changeName = (event) => {
      console.log(event)
      console.log('ğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜Š')

      context.emit('changeName', null)
    }

    return {
      changeCount,
      changeName
    }
  }
})
</script>
